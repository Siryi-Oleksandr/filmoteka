{"mappings":"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","sources":["src/index.js","node_modules/lodash.debounce/index.js","src/js/spinner.js","node_modules/spin.js/spin.js"],"sourcesContent":["import {\n  createMarkupFilmsList,\n  createMarkupSelectedMovie,\n  trimGenresList,\n  createMarkupSearchedList,\n} from './js/card-markup';\nimport { refs } from './js/refs';\nimport {\n  MoviesApiServise,\n  baseImgUrl,\n  imgPosterSize,\n} from './js/search-servise';\nimport debounce from 'lodash.debounce';\nimport { ModalServise } from './js/modal-servise';\nimport { LocalStorageService } from './js/localStorage-service';\nimport { spinnerPlay, spinnerStop } from './js/spinner';\nimport { DataService } from './js/data-service';\n\n\nconst movieServise = new MoviesApiServise(); // create new instance Class API Service\nconst modalServise = new ModalServise(); // create new instance Class Modal Service\nconst localStorage = new LocalStorageService(); // create new instance Class LocalStorage Service\nconst dataService = new DataService(); // create new instance Class Data Service\n\n// ! add listeners\nrefs.moviesList.addEventListener('click', onFetchCurrentMovie);\nrefs.modalContainer.addEventListener('click', onAddToLibrary);\n\n// ! main fetch\nspinnerPlay();\nmovieServise\n  .fetchTrendMovies()\n  .then(handleTrendMovies)\n  .catch(handleError)\n  .finally(() => {\n    spinnerStop();\n  });\n\n// ! Selected movie\nfunction onFetchCurrentMovie(evt) {\n  if (!evt.target.closest('.js-target')) {\n    return;\n  }\n\n  const selectedMovieId = evt.target.closest('.js-target').dataset.id; // catch user click on li\n  spinnerPlay();\n  movieServise\n    .fetchSelectedMovie(selectedMovieId)\n    .then(handleSelectedMovie)\n    .catch(handleError)\n    .finally(() => {\n      spinnerStop();\n    });\n}\n\n// ! Set functions\n\nfunction handleTrendMovies(data) {\n  const { results } = data[0]; // get movies from first promise\n  const { genres } = data[1]; // get genres from second promise\n\n  const necessaryData = dataService.getDataTrendMovies(results, genres);\n  showTrendMovies(necessaryData);\n}\n\nfunction handleSelectedMovie(data) {\n  const necessaryData = dataService.getDataSelectedMovie(data);\n  showSelectedMovie(necessaryData);\n  modalServise.openModal();\n}\n\nfunction showTrendMovies(movies) {\n  const markupTrendMovies = createMarkupFilmsList(movies);\n  refs.moviesList.innerHTML = markupTrendMovies;\n}\n\nfunction showSelectedMovie(movie) {\n  const markupSelectedMovie = createMarkupSelectedMovie(movie);\n  refs.modalContainer.innerHTML = markupSelectedMovie;\n}\n\nfunction onAddToLibrary(evt) {\n  const isBtnAddToQueue = evt.target.name === 'add-to-queue';\n  const isBtnAddToWatched = evt.target.name === 'add-to-watched';\n  if (isBtnAddToQueue) {\n    const movieToQueue = movieServise.selectedMovieId;\n    localStorage.save(localStorage.queueKey, movieToQueue);\n  }\n  if (isBtnAddToWatched) {\n    const movieToWatched = movieServise.selectedMovieId;\n    localStorage.save(localStorage.watchedKey, movieToWatched);\n  }\n}\n\nfunction handleError(err) {\n  console.error(err.message);\n  // here should be Notify message\n  console.log('Oops, something went wrong main page');\n}\n\n// Search reason functionality\n// refs.searchForm.addEventListener('input', debounce(onSearchInput, 300));\n// refs.searchForm.addEventListener('submit', onSearchSubmit);\n\n// function onSearchSubmit(event) {\n//   event.preventDefault();\n\n//   // const value = event.currentTarget.elements.query.value;\n//   const value = event.target.value;\n\n//   console.dir(value);\n\n//   if (!value) {\n//     movieServise\n//       .fetchTrendMovies()\n//       .then(handleTrendMovies)\n//       .catch(handleError)\n//       .finally(() => {\n//         // here should be spinner.close\n//       });\n//   }\n\n//   movieServise\n//     .fetchSearchedMovie(value)\n//     .then(data => console.log(data))\n//     .catch(handleError)\n//     .finally(() => {\n//       // here should be spinner.close\n//     });\n\n// return movieServise\n//   .fetchSearchedMovie(value)\n//   .then(({ results }) => {\n//     const data = searchHandle(results);\n//     const markup = createMarkupSearchedList(data);\n//     refs.moviesList.innerHTML = markup;\n//   })\n//   .catch(handleError)\n//   .finally(() => {\n//     // here should be spinner.close\n//   });\n// }\n\n// function searchHandle(data) {\n//   return data.map(\n//     ({ poster_path, genre_ids, vote_average, title, id, release_date }) => {\n//       const imgUrl = baseImgUrl + imgPosterSize + poster_path;\n//       const genres = trimGenresList(genre_ids);\n\n//       return {\n//         imgUrl: imgUrl,\n//         genres: genres,\n//         rating: vote_average.toFixed(1),\n//         name: title,\n//         id: id,\n//         year: Number.parseInt(release_date),\n//       };\n//     }\n//   );\n// }\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","import { refs } from './refs';\nimport { Spinner } from 'spin.js';\n\nconst opts = {\n  lines: 13, // The number of lines to draw\n  length: 51, // The length of each line\n  width: 10, // The line thickness\n  radius: 47, // The radius of the inner circle\n  scale: 1.1, // Scales overall size of the spinner\n  corners: 0.6, // Corner roundness (0..1)\n  speed: 1.4, // Rounds per second\n  rotate: 3, // The rotation offset\n  animation: 'spinner-line-fade-default', // The CSS animation name for the lines\n  direction: 1, // 1: clockwise, -1: counterclockwise\n  color: '#b97322', // CSS color or array of colors\n  fadeColor: 'transparent', // CSS color or array of colors\n  top: '50%', // Top position relative to parent\n  left: '50%', // Left position relative to parent\n  shadow: '0 0 1px transparent', // Box-shadow for the lines\n  zIndex: 2000000000, // The z-index (defaults to 2e9)\n  className: 'spinner', // The CSS class to assign to the spinner\n  position: 'absolute', // Element positioning\n};\n\nconst spinner = new Spinner(opts);\n\nexport function spinnerPlay() {\n  spinner.spin(refs.spinner);\n  refs.backdropSpinner.classList.remove('is-hidden');\n}\n\nexport function spinnerStop() {\n  spinner.stop();\n  refs.backdropSpinner.classList.add('is-hidden');\n}\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar defaults = {\r\n    lines: 12,\r\n    length: 7,\r\n    width: 5,\r\n    radius: 10,\r\n    scale: 1.0,\r\n    corners: 1,\r\n    color: '#000',\r\n    fadeColor: 'transparent',\r\n    animation: 'spinner-line-fade-default',\r\n    rotate: 0,\r\n    direction: 1,\r\n    speed: 1,\r\n    zIndex: 2e9,\r\n    className: 'spinner',\r\n    top: '50%',\r\n    left: '50%',\r\n    shadow: '0 0 1px transparent',\r\n    position: 'absolute',\r\n};\r\nvar Spinner = /** @class */ (function () {\r\n    function Spinner(opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        this.opts = __assign(__assign({}, defaults), opts);\r\n    }\r\n    /**\r\n     * Adds the spinner to the given target element. If this instance is already\r\n     * spinning, it is automatically removed from its previous target by calling\r\n     * stop() internally.\r\n     */\r\n    Spinner.prototype.spin = function (target) {\r\n        this.stop();\r\n        this.el = document.createElement('div');\r\n        this.el.className = this.opts.className;\r\n        this.el.setAttribute('role', 'progressbar');\r\n        css(this.el, {\r\n            position: this.opts.position,\r\n            width: 0,\r\n            zIndex: this.opts.zIndex,\r\n            left: this.opts.left,\r\n            top: this.opts.top,\r\n            transform: \"scale(\" + this.opts.scale + \")\",\r\n        });\r\n        if (target) {\r\n            target.insertBefore(this.el, target.firstChild || null);\r\n        }\r\n        drawLines(this.el, this.opts);\r\n        return this;\r\n    };\r\n    /**\r\n     * Stops and removes the Spinner.\r\n     * Stopped spinners may be reused by calling spin() again.\r\n     */\r\n    Spinner.prototype.stop = function () {\r\n        if (this.el) {\r\n            if (typeof requestAnimationFrame !== 'undefined') {\r\n                cancelAnimationFrame(this.animateId);\r\n            }\r\n            else {\r\n                clearTimeout(this.animateId);\r\n            }\r\n            if (this.el.parentNode) {\r\n                this.el.parentNode.removeChild(this.el);\r\n            }\r\n            this.el = undefined;\r\n        }\r\n        return this;\r\n    };\r\n    return Spinner;\r\n}());\r\nexport { Spinner };\r\n/**\r\n * Sets multiple style properties at once.\r\n */\r\nfunction css(el, props) {\r\n    for (var prop in props) {\r\n        el.style[prop] = props[prop];\r\n    }\r\n    return el;\r\n}\r\n/**\r\n * Returns the line color from the given string or array.\r\n */\r\nfunction getColor(color, idx) {\r\n    return typeof color == 'string' ? color : color[idx % color.length];\r\n}\r\n/**\r\n * Internal method that draws the individual lines.\r\n */\r\nfunction drawLines(el, opts) {\r\n    var borderRadius = (Math.round(opts.corners * opts.width * 500) / 1000) + 'px';\r\n    var shadow = 'none';\r\n    if (opts.shadow === true) {\r\n        shadow = '0 2px 4px #000'; // default shadow\r\n    }\r\n    else if (typeof opts.shadow === 'string') {\r\n        shadow = opts.shadow;\r\n    }\r\n    var shadows = parseBoxShadow(shadow);\r\n    for (var i = 0; i < opts.lines; i++) {\r\n        var degrees = ~~(360 / opts.lines * i + opts.rotate);\r\n        var backgroundLine = css(document.createElement('div'), {\r\n            position: 'absolute',\r\n            top: -opts.width / 2 + \"px\",\r\n            width: (opts.length + opts.width) + 'px',\r\n            height: opts.width + 'px',\r\n            background: getColor(opts.fadeColor, i),\r\n            borderRadius: borderRadius,\r\n            transformOrigin: 'left',\r\n            transform: \"rotate(\" + degrees + \"deg) translateX(\" + opts.radius + \"px)\",\r\n        });\r\n        var delay = i * opts.direction / opts.lines / opts.speed;\r\n        delay -= 1 / opts.speed; // so initial animation state will include trail\r\n        var line = css(document.createElement('div'), {\r\n            width: '100%',\r\n            height: '100%',\r\n            background: getColor(opts.color, i),\r\n            borderRadius: borderRadius,\r\n            boxShadow: normalizeShadow(shadows, degrees),\r\n            animation: 1 / opts.speed + \"s linear \" + delay + \"s infinite \" + opts.animation,\r\n        });\r\n        backgroundLine.appendChild(line);\r\n        el.appendChild(backgroundLine);\r\n    }\r\n}\r\nfunction parseBoxShadow(boxShadow) {\r\n    var regex = /^\\s*([a-zA-Z]+\\s+)?(-?\\d+(\\.\\d+)?)([a-zA-Z]*)\\s+(-?\\d+(\\.\\d+)?)([a-zA-Z]*)(.*)$/;\r\n    var shadows = [];\r\n    for (var _i = 0, _a = boxShadow.split(','); _i < _a.length; _i++) {\r\n        var shadow = _a[_i];\r\n        var matches = shadow.match(regex);\r\n        if (matches === null) {\r\n            continue; // invalid syntax\r\n        }\r\n        var x = +matches[2];\r\n        var y = +matches[5];\r\n        var xUnits = matches[4];\r\n        var yUnits = matches[7];\r\n        if (x === 0 && !xUnits) {\r\n            xUnits = yUnits;\r\n        }\r\n        if (y === 0 && !yUnits) {\r\n            yUnits = xUnits;\r\n        }\r\n        if (xUnits !== yUnits) {\r\n            continue; // units must match to use as coordinates\r\n        }\r\n        shadows.push({\r\n            prefix: matches[1] || '',\r\n            x: x,\r\n            y: y,\r\n            xUnits: xUnits,\r\n            yUnits: yUnits,\r\n            end: matches[8],\r\n        });\r\n    }\r\n    return shadows;\r\n}\r\n/**\r\n * Modify box-shadow x/y offsets to counteract rotation\r\n */\r\nfunction normalizeShadow(shadows, degrees) {\r\n    var normalized = [];\r\n    for (var _i = 0, shadows_1 = shadows; _i < shadows_1.length; _i++) {\r\n        var shadow = shadows_1[_i];\r\n        var xy = convertOffset(shadow.x, shadow.y, degrees);\r\n        normalized.push(shadow.prefix + xy[0] + shadow.xUnits + ' ' + xy[1] + shadow.yUnits + shadow.end);\r\n    }\r\n    return normalized.join(', ');\r\n}\r\nfunction convertOffset(x, y, degrees) {\r\n    var radians = degrees * Math.PI / 180;\r\n    var sin = Math.sin(radians);\r\n    var cos = Math.cos(radians);\r\n    return [\r\n        Math.round((x * cos + y * sin) * 1000) / 1000,\r\n        Math.round((-x * sin + y * cos) * 1000) / 1000,\r\n    ];\r\n}\r\n"],"names":["$fA1qS","parcelRequire","$3a60d30aee96367f$var$reTrim","$3a60d30aee96367f$var$reIsBadHex","$3a60d30aee96367f$var$reIsBinary","$3a60d30aee96367f$var$reIsOctal","$3a60d30aee96367f$var$freeParseInt","parseInt","$3a60d30aee96367f$var$freeGlobal","$parcel$global","Object","$3a60d30aee96367f$var$freeSelf","self","$3a60d30aee96367f$var$root","Function","$3a60d30aee96367f$var$objectToString","prototype","toString","$3a60d30aee96367f$var$nativeMax","Math","max","$3a60d30aee96367f$var$nativeMin","min","$3a60d30aee96367f$var$now","Date","now","$3a60d30aee96367f$var$isObject","value","type","$3a60d30aee96367f$var$toNumber","$3a60d30aee96367f$var$isObjectLike","call","$3a60d30aee96367f$var$isSymbol","other","valueOf","replace","isBinary","test","slice","$krGWQ","$9ea725aae8e0ad5d$var$__assign","assign","t","s","i","n","arguments","length","p","hasOwnProperty","apply","this","$9ea725aae8e0ad5d$var$defaults","lines","width","radius","scale","corners","color","fadeColor","animation","rotate","direction","speed","zIndex","className","top","left","shadow","position","$9ea725aae8e0ad5d$export$7f7cbe89f1eacd2","Spinner","opts","spin","target","stop","el","document","createElement","setAttribute","$9ea725aae8e0ad5d$var$css","transform","insertBefore","firstChild","borderRadius","round","shadows","boxShadow","regex","_i","_a","split","matches","match","x","y","xUnits","yUnits","push","prefix","end","$9ea725aae8e0ad5d$var$parseBoxShadow","degrees","backgroundLine","height","background","$9ea725aae8e0ad5d$var$getColor","transformOrigin","delay","line","$9ea725aae8e0ad5d$var$normalizeShadow","appendChild","$9ea725aae8e0ad5d$var$drawLines","requestAnimationFrame","cancelAnimationFrame","animateId","clearTimeout","parentNode","removeChild","undefined","props","prop","style","idx","normalized","shadows_1","xy","$9ea725aae8e0ad5d$var$convertOffset","join","radians","PI","sin","cos","$00cfbbdd8a53f936$var$spinner","$9ea725aae8e0ad5d$exports","$00cfbbdd8a53f936$export$2c6c1315bfe20b8f","refs","spinner","backdropSpinner","classList","remove","$00cfbbdd8a53f936$export$b0293130610857b9","add","$1f0dc3b9307be026$var$movieServise","$g3JmK","MoviesApiServise","$1f0dc3b9307be026$var$modalServise","$7TcCz","ModalServise","$1f0dc3b9307be026$var$localStorage","$hvBA4","LocalStorageService","$1f0dc3b9307be026$var$dataService","$domc1","DataService","$1f0dc3b9307be026$var$handleSelectedMovie","data","movie","markupSelectedMovie","createMarkupSelectedMovie","modalContainer","innerHTML","$1f0dc3b9307be026$var$showSelectedMovie","getDataSelectedMovie","openModal","$1f0dc3b9307be026$var$handleError","err","console","error","message","log","moviesList","addEventListener","evt","closest","selectedMovieId","dataset","id","fetchSelectedMovie","then","catch","finally","isBtnAddToQueue","name","isBtnAddToWatched","movieToQueue","save","queueKey","movieToWatched","watchedKey","fetchTrendMovies","results","genres","movies","markupTrendMovies","createMarkupFilmsList","$1f0dc3b9307be026$var$showTrendMovies","getDataTrendMovies"],"version":3,"file":"index.4bad1f12.js.map"}
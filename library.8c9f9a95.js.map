{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,iEAOA,MAAMC,EAAe,IAAI,EAAAC,EAAAC,kBAEnBC,GADe,IAAI,EAAAC,EAAAC,cACJ,IAAI,EAAAC,EAAAC,sBACnBC,EAAc,IAAI,EAAAC,EAAAC,aAElBC,EAAgBR,EAAaS,KAAKT,EAAaU,UAC/CC,EAAkBX,EAAaS,KAAKT,EAAaY,YAcvD,SAASC,EAAiBC,IAO1B,SAAyBA,GACvB,MAAMC,GAAoB,EAAApB,EAAAqB,yBAAwBF,GAClDG,EAAAC,KAAKC,YAAYC,UAAYL,CAC/B,CANEM,CAHsBP,EAAOQ,KAAI,EAACC,KAAEA,KAC3BlB,EAAYmB,qBAAqBD,KAG5C,CA8BA,SAASE,EAAYC,GACnBC,QAAQC,MAAMF,EAAIG,SAElBF,QAAQG,IAAI,0CACd,CAnDAb,EAAAC,KAAKa,SAASC,iBAAiB,SAwB/B,WACEf,EAAAC,KAAKa,SAASE,UAAUC,IAAI,aAC5BjB,EAAAC,KAAKiB,WAAWF,UAAUG,OAAO,aACjCvC,EACGwC,iBAAiB7B,GACjB8B,KAAKzB,GACL0B,MAAMd,GACNe,SAAQ,QAGb,IAjCAvB,EAAAC,KAAKiB,WAAWH,iBAAiB,SAkCjC,WACEf,EAAAC,KAAKiB,WAAWF,UAAUC,IAAI,aAC9BjB,EAAAC,KAAKa,SAASE,UAAUG,OAAO,aAC/BvC,EACGwC,iBAAiB1B,GACjB2B,KAAKzB,GACL0B,MAAMd,GACNe,SAAQ,QAGb,IAzCA3C,EACGwC,iBAAiB7B,GACjB8B,KAAKzB,GACL0B,MAAMd,GACNe,SAAQ","sources":["src/library.js"],"sourcesContent":["import { createMarkupLibraryList } from './js/card-markup';\nimport { refs } from './js/refs';\nimport { MoviesApiServise } from './js/search-servise';\nimport { ModalServise } from './js/modal-servise';\nimport { LocalStorageService } from './js/localStorage-service';\nimport { DataService } from './js/data-service';\n\nconst movieServise = new MoviesApiServise(); // create new instance Class API Service\nconst modalServise = new ModalServise(); // create new instance Class Modal Service\nconst localStorage = new LocalStorageService(); // create new instance Class LocalStorage Service\nconst dataService = new DataService(); // create new instance Class Data Service\n\nconst queueMovieIds = localStorage.load(localStorage.queueKey);\nconst watchedMovieIds = localStorage.load(localStorage.watchedKey);\n\nrefs.btnQueue.addEventListener('click', onShowQueueMovies);\nrefs.btnWatched.addEventListener('click', onShowWatchedMovies);\n\n// ! Default Render Library Page\nmovieServise\n  .fetchQueueMovies(queueMovieIds)\n  .then(handleQueueMovie)\n  .catch(handleError)\n  .finally(() => {\n    // here should be spinner.close\n  });\n\nfunction handleQueueMovie(movies) {\n  const necessaryData = movies.map(({ data }) => {\n    return dataService.getDataSelectedMovie(data);\n  });\n  showQueueMovies(necessaryData);\n}\n\nfunction showQueueMovies(movies) {\n  const markupQueueMovies = createMarkupLibraryList(movies);\n  refs.libraryList.innerHTML = markupQueueMovies;\n}\n\nfunction onShowQueueMovies() {\n  refs.btnQueue.classList.add('is-active');\n  refs.btnWatched.classList.remove('is-active');\n  movieServise\n    .fetchQueueMovies(queueMovieIds)\n    .then(handleQueueMovie)\n    .catch(handleError)\n    .finally(() => {\n      // here should be spinner.close\n    });\n}\nfunction onShowWatchedMovies() {\n  refs.btnWatched.classList.add('is-active');\n  refs.btnQueue.classList.remove('is-active');\n  movieServise\n    .fetchQueueMovies(watchedMovieIds)\n    .then(handleQueueMovie)\n    .catch(handleError)\n    .finally(() => {\n      // here should be spinner.close\n    });\n}\n\nfunction handleError(err) {\n  console.error(err.message);\n  // here should be Notify message\n  console.log('Oops, something went wrong library page');\n}\n"],"names":["$fA1qS","parcelRequire","$ce3726a01b8ab25a$var$movieServise","$g3JmK","MoviesApiServise","$ce3726a01b8ab25a$var$localStorage","$7TcCz","ModalServise","$hvBA4","LocalStorageService","$ce3726a01b8ab25a$var$dataService","$domc1","DataService","$ce3726a01b8ab25a$var$queueMovieIds","load","queueKey","$ce3726a01b8ab25a$var$watchedMovieIds","watchedKey","$ce3726a01b8ab25a$var$handleQueueMovie","movies","markupQueueMovies","createMarkupLibraryList","$krGWQ","refs","libraryList","innerHTML","$ce3726a01b8ab25a$var$showQueueMovies","map","data","getDataSelectedMovie","$ce3726a01b8ab25a$var$handleError","err","console","error","message","log","btnQueue","addEventListener","classList","add","btnWatched","remove","fetchQueueMovies","then","catch","finally"],"version":3,"file":"library.8c9f9a95.js.map"}
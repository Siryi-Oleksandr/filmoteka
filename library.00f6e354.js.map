{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,8EAQA,MAAMC,EAAe,IAAI,EAAAC,EAAAC,kBAEnBC,GADe,IAAI,EAAAC,EAAAC,cACJ,IAAI,EAAAC,EAAAC,sBACnBC,EAAc,IAAI,EAAAC,EAAAC,aAElBC,EAAgBR,EAAaS,KAAKT,EAAaU,UAC/CC,EAAkBX,EAAaS,KAAKT,EAAaY,YAevD,SAASC,EAAiBC,IAO1B,SAAyBA,GACvB,MAAMC,GAAoB,EAAApB,EAAAqB,yBAAwBF,GAClDG,EAAAC,KAAKC,YAAYC,UAAYL,CAC/B,CANEM,CAHsBP,EAAOQ,KAAI,EAACC,KAAEA,KAC3BlB,EAAYmB,qBAAqBD,KAG5C,CAgCA,SAASE,EAAYC,GACnBC,QAAQC,MAAMF,EAAIG,SAElBF,QAAQG,IAAI,0CACd,CAtDAb,EAAAC,KAAKa,SAASC,iBAAiB,SAyB/B,WACEf,EAAAC,KAAKa,SAASE,UAAUC,IAAI,aAC5BjB,EAAAC,KAAKiB,WAAWF,UAAUG,OAAO,cACjC,EAAAC,EAAAC,eACAzC,EACG0C,iBAAiB/B,GACjBgC,KAAK3B,GACL4B,MAAMhB,GACNiB,SAAQ,MACP,EAAAL,EAAAM,cAAU,GAEhB,IAnCA1B,EAAAC,KAAKiB,WAAWH,iBAAiB,SAoCjC,WACEf,EAAAC,KAAKiB,WAAWF,UAAUC,IAAI,aAC9BjB,EAAAC,KAAKa,SAASE,UAAUG,OAAO,cAC/B,EAAAC,EAAAC,eACAzC,EACG0C,iBAAiB5B,GACjB6B,KAAK3B,GACL4B,MAAMhB,GACNiB,SAAQ,MACP,EAAAL,EAAAM,cAAU,GAEhB,KA5CA,EAAAN,EAAAC,eACAzC,EACG0C,iBAAiB/B,GACjBgC,KAAK3B,GACL4B,MAAMhB,GACNiB,SAAQ,MACP,EAAAL,EAAAM,cAAU,G","sources":["src/library.js"],"sourcesContent":["import { createMarkupLibraryList } from './js/card-markup';\nimport { refs } from './js/refs';\nimport { MoviesApiServise } from './js/search-servise';\nimport { ModalServise } from './js/modal-servise';\nimport { LocalStorageService } from './js/localStorage-service';\nimport { DataService } from './js/data-service';\nimport { spinnerPlay, spinnerStop } from './js/spinner';\n\nconst movieServise = new MoviesApiServise(); // create new instance Class API Service\nconst modalServise = new ModalServise(); // create new instance Class Modal Service\nconst localStorage = new LocalStorageService(); // create new instance Class LocalStorage Service\nconst dataService = new DataService(); // create new instance Class Data Service\n\nconst queueMovieIds = localStorage.load(localStorage.queueKey);\nconst watchedMovieIds = localStorage.load(localStorage.watchedKey);\n\nrefs.btnQueue.addEventListener('click', onShowQueueMovies);\nrefs.btnWatched.addEventListener('click', onShowWatchedMovies);\n\n// ! Default Render Library Page\nspinnerPlay();\nmovieServise\n  .fetchQueueMovies(queueMovieIds)\n  .then(handleQueueMovie)\n  .catch(handleError)\n  .finally(() => {\n    spinnerStop();\n  });\n\nfunction handleQueueMovie(movies) {\n  const necessaryData = movies.map(({ data }) => {\n    return dataService.getDataSelectedMovie(data);\n  });\n  showQueueMovies(necessaryData);\n}\n\nfunction showQueueMovies(movies) {\n  const markupQueueMovies = createMarkupLibraryList(movies);\n  refs.libraryList.innerHTML = markupQueueMovies;\n}\n\nfunction onShowQueueMovies() {\n  refs.btnQueue.classList.add('is-active');\n  refs.btnWatched.classList.remove('is-active');\n  spinnerPlay();\n  movieServise\n    .fetchQueueMovies(queueMovieIds)\n    .then(handleQueueMovie)\n    .catch(handleError)\n    .finally(() => {\n      spinnerStop();\n    });\n}\nfunction onShowWatchedMovies() {\n  refs.btnWatched.classList.add('is-active');\n  refs.btnQueue.classList.remove('is-active');\n  spinnerPlay();\n  movieServise\n    .fetchQueueMovies(watchedMovieIds)\n    .then(handleQueueMovie)\n    .catch(handleError)\n    .finally(() => {\n      spinnerStop();\n    });\n}\n\nfunction handleError(err) {\n  console.error(err.message);\n  // here should be Notify message\n  console.log('Oops, something went wrong library page');\n}\n"],"names":["$47Cdc","parcelRequire","$cecbdd76f2d3d4bd$var$movieServise","$5rdqZ","MoviesApiServise","$cecbdd76f2d3d4bd$var$localStorage","$kf3wk","ModalServise","$aDChi","LocalStorageService","$cecbdd76f2d3d4bd$var$dataService","$guJEc","DataService","$cecbdd76f2d3d4bd$var$queueMovieIds","load","queueKey","$cecbdd76f2d3d4bd$var$watchedMovieIds","watchedKey","$cecbdd76f2d3d4bd$var$handleQueueMovie","movies","markupQueueMovies","createMarkupLibraryList","$4Nugj","refs","libraryList","innerHTML","$cecbdd76f2d3d4bd$var$showQueueMovies","map","data","getDataSelectedMovie","$cecbdd76f2d3d4bd$var$handleError","err","console","error","message","log","btnQueue","addEventListener","classList","add","btnWatched","remove","$j1lrD","spinnerPlay","fetchQueueMovies","then","catch","finally","spinnerStop"],"version":3,"file":"library.00f6e354.js.map"}
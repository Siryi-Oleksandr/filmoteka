{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAKA,MAAMC,EAAU,IAAI,G,cAAAC,SAEdC,EAAOC,SAASC,cAAc,0BAC9BC,EAAiBF,SAASC,cAAc,2BACxCE,EAAeH,SAASC,cAAc,yBAIzBG,aAAaC,QAFb,iBAGFD,aAAaC,QAFZ,eAClB,IAIIC,EAAW,KAUf,SAASC,IACPJ,EAAaK,UAAUC,OAAO,4BAC9BP,EAAeM,UAAUE,IAAI,4BAE7BC,EAAoB,UACtB,CAEA,SAASC,IACPV,EAAeM,UAAUC,OAAO,4BAChCN,EAAaK,UAAUE,IAAI,4BAE3BC,EAAoB,QACtB,CAwBA,SAASA,EAAoBE,EAAY,SACvChB,EAAQiB,QACRR,EACGS,cAAcF,GACdG,MAAK,EAACC,SAAEA,MACFA,IACHlB,EAAKmB,UAAY,yFAMnBnB,EAAKmB,WAAY,EAAAvB,EAAAwB,yBAAwBF,EAAA,IAE1CG,OAAMC,IACLC,QAAQD,MAAMA,EAAA,IAEfE,SAAQ,KACP1B,EAAQ2B,MAAI,GAElB,C,uHC1EgB,IAAI,EAAAC,EAAA3B,SAApB,MASM4B,EAAuB1B,SAASC,cAAc,oBAE9C0B,GAAoB,EAAAC,EAAAC,qBACpBC,EAAW,IAAI,EAAAC,EAAAC,iBDFd,IAAuBC,ECK9BP,EAAqBQ,iBAAiB,SAAS,KAC7CJ,EAASK,aAAW,KAItB,EAAAC,EAAAC,eAAcV,GAEdG,EAASQ,oBAET,EAAAC,EAAAC,YAAWV,GAGXW,OAAOC,QDjBuBT,ECiBAH,EDhB5B3B,EAAa+B,iBAAiB,QAAStB,GACvCV,EAAegC,iBAAiB,QAAS3B,GAEzCD,EAAW2B,OACX3B,EAASqC,WAAahC","sources":["src/js/library-markup.js","src/library.js"],"sourcesContent":["import { createMarkupLibraryList } from './markup';\n// import { paginationLib } from './library-pagination';\n// import { Pagination } from 'swiper';\nimport { Spinner } from './spinner';\n\nconst spinner = new Spinner();\n\nconst list = document.querySelector('.js-films-list-library');\nconst libraryWatcehd = document.querySelector('.js-btn-library-watched');\nconst libraryQueue = document.querySelector('.js-btn-library-queue');\n\nconst watchedKey = 'watchedMovies';\nconst queuedKey = 'queueMovies';\nlet watchedFilms = localStorage.getItem(watchedKey);\nlet queueFilms = localStorage.getItem(queuedKey);\nlet arr = [];\nlet totalFilms = 0;\nlet fireBase = null;\n\nexport function onLoadLibrary(firebaseLib) {\n  libraryQueue.addEventListener('click', onQueueClick);\n  libraryWatcehd.addEventListener('click', onWatchedClick);\n  // checkLocalStorage(queueFilms);\n  fireBase = firebaseLib;\n  fireBase.afterLogin = getDataFromFirebase;\n}\n\nfunction onWatchedClick() {\n  libraryQueue.classList.remove('main-btn--library-active');\n  libraryWatcehd.classList.add('main-btn--library-active');\n  // checkLocalStorage(watchedFilms);\n  getDataFromFirebase('Watched');\n}\n\nfunction onQueueClick() {\n  libraryWatcehd.classList.remove('main-btn--library-active');\n  libraryQueue.classList.add('main-btn--library-active');\n  // checkLocalStorage(queueFilms);\n  getDataFromFirebase('Queue');\n}\n\nexport function checkLocalStorage(key) {\n  arr = JSON.parse(key);\n  if (arr.length === 0) {\n    list.innerHTML = `<li class=\"empty-storage\">\n    <div>Sorry, this storage is empty.</div>\n    <a class=\"home-btn\" href=\"./index.html\">Home</a>\n  </li>`;\n    paginationLib(0, 0);\n  } else {\n    if (arr.length === 18) {\n      list.innerHTML = createMarkupLibraryList(arr.slice(0, 18));\n      paginationLib(1, 1);\n      return;\n    }\n    totalFilms = Number.parseInt(arr.length / 18 + 1);\n    list.innerHTML = createMarkupLibraryList(arr.slice(0, 18));\n\n    paginationLib(totalFilms, 1);\n    return;\n  }\n}\n\nfunction getDataFromFirebase(movieType = 'Queue') {\n  spinner.start();\n  fireBase\n    .readMovieData(movieType)\n    .then(({ arrFilms }) => {\n      if (!arrFilms) {\n        list.innerHTML = `<li class=\"empty-storage\">\n      <div>Sorry, this storage is empty.</div>\n    </li>`;\n        // paginationLib(0, 0);\n      }\n\n      list.innerHTML = createMarkupLibraryList(arrFilms);\n    })\n    .catch(error => {\n      console.error(error);\n    })\n    .finally(() => {\n      spinner.stop();\n    });\n}\n","import { onQueue, onWatched, onLoadLibrary } from './js/library-markup';\nimport { refsLib } from './js/library-pagination';\nimport { scrollTop } from './js/button';\n\nimport './js/modal';\nimport './js/footer-modal';\nimport './js/registr-modal';\nimport { Spinner } from './js/spinner';\n\nconst spinner = new Spinner();\n\n// ! FireBase initialization *******************************************\nimport { initializeApp } from 'firebase/app';\nimport { getFirebaseConfig } from './js/firebase-config';\nimport { FireBaseService } from './js/firebase';\nimport { toFirebase } from './js/modal';\n// import { toFirebaseLib } from './js/library-markup';\n\nconst signOutLibraryButton = document.querySelector('.js-sign-out-lib');\n\nconst firebaseAppConfig = getFirebaseConfig();\nconst firebase = new FireBaseService();\n\n// add listeners\nsignOutLibraryButton.addEventListener('click', () => {\n  firebase.signOutUser();\n});\n\n// * Initialize Firebase\ninitializeApp(firebaseAppConfig);\n// * Initialize Firebase Performance Monitoring\nfirebase.initFirebaseAuth();\n\ntoFirebase(firebase);\n// toFirebaseLib(firebase);\n\nwindow.onload = onLoadLibrary(firebase);\n"],"names":["$3huUq","parcelRequire","$ddb65353e6f828dc$var$spinner","Spinner","$ddb65353e6f828dc$var$list","document","querySelector","$ddb65353e6f828dc$var$libraryWatcehd","$ddb65353e6f828dc$var$libraryQueue","localStorage","getItem","$ddb65353e6f828dc$var$fireBase","$ddb65353e6f828dc$var$onWatchedClick","classList","remove","add","$ddb65353e6f828dc$var$getDataFromFirebase","$ddb65353e6f828dc$var$onQueueClick","movieType","start","readMovieData","then","arrFilms","innerHTML","createMarkupLibraryList","catch","error","console","finally","stop","$04jNI","$ce3726a01b8ab25a$var$signOutLibraryButton","$ce3726a01b8ab25a$var$firebaseAppConfig","$7iEdO","getFirebaseConfig","$ce3726a01b8ab25a$var$firebase","$2ix2C","FireBaseService","firebaseLib","addEventListener","signOutUser","$gKkQl","initializeApp","initFirebaseAuth","$bTcpz","toFirebase","window","onload","afterLogin"],"version":3,"file":"library.fd9e5555.js.map"}